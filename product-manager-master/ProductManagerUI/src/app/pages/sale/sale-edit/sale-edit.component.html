<div class="alert alert-danger" role="alert" *ngIf="errors != null">
  Please fix this errors in order to complete your request.
  <div  role="alert" *ngFor="let item of this.errors">
    {{item.name}}:
    <div role="alert" class="ms-4" *ngFor="let err of item.errors">
      {{err}}
    </div>
  </div>
</div>

<form [formGroup]="saleForm" class="example-form">

  <mat-form-field class="example-full-width w-25">
    <mat-label>Product</mat-label>
    <input type="text"
           placeholder="Parent"
           aria-label="Number"
           matInput
           formControlName="product"
           [matAutocomplete]="auto"
           class="d-flex"
    >
    <mat-autocomplete #auto="matAutocomplete" (optionSelected)="onSelectedProduct($event)"  [displayWith]="displayProperty">
      <mat-option *ngFor="let option of filteredProductOptions | async" [value]="option" >
        {{option.name}}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>

  <div *ngIf="saleForm.controls.product.invalid && (saleForm.controls.product.dirty || saleForm.controls.product.touched)"
       class="alert d-inline-block">
    <div *ngIf="saleForm.controls.product.errors?.productDoesNotExist">
      This product doesn't exist.
    </div>
  </div>

  <br/>

  <mat-form-field class="example-full-width w-25">
    <mat-label>Customer</mat-label>
    <input type="text"
           placeholder="Customer"
           aria-label="Number"
           matInput
           formControlName="customer"
           class="d-flex"
    >
  </mat-form-field>

  <button class="ms-2 " mat-raised-button
          color="primary" (click)="openFindCustomerDialog()">Find Customer
  </button>

  <br/>

  <mat-form-field class="example-full-width w-25">
    <mat-label>Amount</mat-label>
    <input type="number"
           placeholder="Amount"
           aria-label="Number"
           matInput
           formControlName="amount"
           class="d-flex"
    >
  </mat-form-field>

  <div *ngIf="saleForm.controls.amount.invalid && (saleForm.controls.amount.dirty || saleForm.controls.amount.touched)"
       class="alert d-inline-block">
    <div *ngIf="saleForm.controls.amount.errors?.required">
      Amount is required.
    </div>
  </div>
  <br/>

  <br/>
  <mat-form-field class="example-full-width w-25">
    <mat-label>Cost</mat-label>
    <input type="number"
           placeholder="Cost"
           aria-label="Number"
           matInput
           formControlName="income"
           class="d-flex"
    >
  </mat-form-field>

  <div *ngIf="saleForm.controls.income.invalid && (saleForm.controls.income.dirty || saleForm.controls.income.touched)"
       class="alert d-inline-block">
    <div *ngIf="saleForm.controls.income.errors?.required">
      Cost is required.
    </div>
  </div>

  <br/>

  <mat-form-field appearance="fill" class="w-25">
    <mat-label>Purchase Date</mat-label>
    <input  formControlName="dateTime" [matDatepicker]="picker" matInput >
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
  </mat-form-field>

  <button [disabled]="!saleForm.valid" type="submit" class="mt-3 align-self-end d-flex" mat-raised-button
          color="primary" (click)="save()">Save
  </button>
</form>
