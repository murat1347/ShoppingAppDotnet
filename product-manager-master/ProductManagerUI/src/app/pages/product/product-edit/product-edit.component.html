<div class="d-sm-flex align-items-center justify-content-between mb-4">
  <h1 class="h3 mb-0 text-gray-800">{{!productId? "New Product" : "Update Product"}}</h1>
</div>

<div class="alert alert-danger" role="alert" *ngIf="errors != null">
  Please fix this errors in order to complete your request.
  <div  role="alert" *ngFor="let item of this.errors">
    {{item.name}}:
    <div role="alert" class="ms-4" *ngFor="let err of item.errors">
      {{err}}
    </div>
  </div>
</div>

<form [formGroup]="productForm" class="example-form">

  <mat-form-field class="example-full-width w-25">
    <mat-label>Product Name</mat-label>
    <input matInput formControlName="name" class="d-flex">
  </mat-form-field>

  <div *ngIf="productForm.controls.name.invalid && (productForm.controls.name.dirty || productForm.controls.name.touched)"
       class="alert d-inline-block">
    <div *ngIf="productForm.controls.name.errors?.required">
      Name is required.
    </div>
    <div *ngIf="productForm.controls.name.errors?.minlength">
      Name must be at least {{ Product.NameMinLength  }} characters long.
    </div>
    <div *ngIf="productForm.controls.name.errors?.maxlength">
      Name must be at most {{ Product.NameMaxLength  }} characters long.
    </div>
  </div>
  <br/>

  <mat-form-field class="example-full-width w-25">
    <mat-label>Product Image Url</mat-label>
    <input matInput formControlName="imageUrl" Url="imageUrl" class="d-flex" >
  </mat-form-field>

  <div *ngIf="productForm.controls.imageUrl.invalid && (productForm.controls.imageUrl.dirty || productForm.controls.imageUrl.touched)"
       class="alert d-inline-block">
    <div *ngIf="productForm.controls.imageUrl.errors?.required">
      Image Url is required.
    </div>
    <div *ngIf="productForm.controls.imageUrl.errors?.minlength">
      Image Url must be at least {{ Product.ImageUrlMinLength  }} characters long.
    </div>
    <div *ngIf="productForm.controls.imageUrl.errors?.maxlength">
      Image Url must be at most {{ Product.ImageUrlMaxLength  }} characters long.
    </div>
  </div>
  <br/>

  <mat-form-field class="example-full-width w-25">
    <mat-label>Product's Category</mat-label>
    <input type="text"
           placeholder="Parent"
           aria-label="Number"
           matInput
           formControlName="category"
           [matAutocomplete]="auto"
           class="d-flex"
    >
    <mat-autocomplete #auto="matAutocomplete">
      <mat-option *ngFor="let option of filteredOptions | async" [value]="option.name ">
        {{option.name}}
      </mat-option>
    </mat-autocomplete>
  </mat-form-field>

  <div *ngIf="productForm.controls.category.invalid && (productForm.controls.category.dirty || productForm.controls.category.touched)"
       class="alert d-inline-block">
    <div *ngIf="productForm.controls.category.errors?.categoryDoesNotExist">
      This category doesn't exist.
    </div>
  </div>

  <button [disabled]="!productForm.valid" type="submit" class="mt-3 align-self-end d-flex" mat-raised-button
          color="primary" (click)="save()">Save
  </button>
</form>
